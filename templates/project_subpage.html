{% extends "base.html" %}

{% block content %}
<section class="project-subpage-section">
    <div class="section-spacer"></div>
    <div class="container">
        <!-- Botón de volver -->
        <a href="{{ url_for('project_detail', project_id=project.id) }}" class="back-link animate-on-scroll">
            <i class="fas fa-arrow-left"></i> Volver al proyecto
        </a>
        
        <!-- Encabezado -->
        <div class="subpage-header animate-on-scroll" data-delay="0.1s">
            <div class="subpage-breadcrumb">
                <span>{{ project.title }}</span>
                <i class="fas fa-chevron-right"></i>
                <span class="current-page">{{ title }}</span>
            </div>
            <h1 class="subpage-title">
                <span class="title-icon">
                    {% if title == 'Preprocesamiento' %}
                    <i class="fas fa-cogs"></i>
                    {% elif title == 'Análisis' %}
                    <i class="fas fa-chart-line"></i>
                    {% else %}
                    <i class="fas fa-robot"></i>
                    {% endif %}
                </span>
                {{ title }}
            </h1>
        </div>
        
        <!-- Contenido principal -->
        <div class="subpage-content-grid">
            <!-- Texto/documentación -->
            <article class="subpage-documentation animate-on-scroll" data-delay="0.2s">
                <div class="documentation-content">
                    {{ content|safe }}
                </div>
                
                <!-- Acción específica según la sección -->
                <div class="action-section">
                    {% if title == 'Machine Learning' %}
                    <a href="{{ project.demo_url }}" class="action-btn" target="_blank">
                        <i class="fas fa-external-link-alt"></i>
                        <span>Ver demo en vivo</span>
                    </a>
                    {% elif title == 'Análisis' %}
                    <a href="{{ project.dashboard_url }}" class="action-btn" download>
                        <i class="fas fa-download"></i>
                        <span>Descargar dashboard</span>
                    </a>
                    {% endif %}
                </div>
            </article>
            
            <!-- Imagen/visualización -->
            <aside class="subpage-visualization animate-on-scroll" data-delay="0.3s">
                <div class="visualization-container">
                    {% if title == 'Preprocesamiento' %}
                    <img src="{{ url_for('static', filename='img/data-processing.jpg') }}" 
                         alt="Procesamiento de datos" class="visualization-image">
                    {% elif title == 'Análisis' %}
                    <img src="{{ url_for('static', filename='img/data-analysis.jpg') }}" 
                         alt="Análisis de datos" class="visualization-image">
                    {% else %}
                    <img src="{{ url_for('static', filename='img/ml-model.jpg') }}" 
                         alt="Modelo de Machine Learning" class="visualization-image">
                    {% endif %}
                    <div class="image-caption">
                        Ilustración del proceso de {{ title|lower }}
                    </div>
                </div>
            </aside>
        </div>
        
        <!-- Navegación entre secciones -->
        <nav class="subpage-navigation animate-on-scroll" data-delay="0.4s">
            <a href="{{ url_for('project_subpage', project_id=project.id, subpage='preprocesamiento') }}" 
               class="nav-btn {% if title == 'Preprocesamiento' %}active{% endif %}">
                <i class="fas fa-cogs"></i>
                <span>Preprocesamiento</span>
            </a>
            <a href="{{ url_for('project_subpage', project_id=project.id, subpage='analisis') }}" 
               class="nav-btn {% if title == 'Análisis' %}active{% endif %}">
                <i class="fas fa-chart-line"></i>
                <span>Análisis</span>
            </a>
            <a href="{{ url_for('project_subpage', project_id=project.id, subpage='ml') }}" 
               class="nav-btn {% if title == 'Machine Learning' %}active{% endif %}">
                <i class="fas fa-robot"></i>
                <span>Machine Learning</span>
            </a>
        </nav>
    </div>
</section>
{% endblock %}