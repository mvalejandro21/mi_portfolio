{% extends "base.html" %}

{% block content %}
<section class="project-detail wine-project">
    <div class="container">
        <!-- Breadcrumb navigation actualizado -->
        <nav class="breadcrumb">
            <a href="{{ url_for('home') }}">Inicio</a>
            <i class="fas fa-chevron-right"></i>
            <a href="{{ url_for('projects_page') }}">Proyectos</a>
            <i class="fas fa-chevron-right"></i>
            <span>{{ project.title }}</span>
        </nav>

        <!-- Project header -->
        <div class="project-header">
            <div class="header-content">
                <h1>{{ project.title }}</h1>
                <p class="project-subtitle">{{ project.description }}</p>
                
                <div class="project-links">
                    {% if project.github_url %}
                    <a href="{{ project.github_url }}" class="btn outline" target="_blank">
                        <i class="fab fa-github"></i> C√≥digo
                    </a>
                    {% endif %}
                    {% if project.dataset_url %}
                    <a href="{{ project.dataset_url }}" class="btn outline" target="_blank">
                        <i class="fas fa-database"></i> Dataset
                    </a>
                    {% endif %}
                    {% if project.demo_url %}
                    <a href="{{ project.demo_url }}" class="btn primary" target="_blank">
                        <i class="fas fa-external-link-alt"></i> Demo
                    </a>
                    {% endif %}
                </div>
            </div>
            
            <div class="header-image">
                <img src="{{ url_for('static', filename='img/' + project.image) }}" 
                     alt="{{ project.title }}" class="featured-image">
            </div>
        </div>

        <!-- Project overview -->
        <div class="project-overview">
            <div class="overview-content">
                <h2>üìå Resumen del Proyecto</h2>
                <div class="overview-text">
                    {{ project.long_description|safe }}
                </div>
            </div>
            
            <div class="overview-details">
                <div class="detail-card">
                    <h3>üè∑Ô∏è Categor√≠a</h3>
                    <p>{{ project.category }}</p>
                </div>
                
                <div class="detail-card">
                    <h3>üõ†Ô∏è Tecnolog√≠as</h3>
                    <div class="tech-tags">
                        {% for tag in project.tags.split(',') %}
                        <span class="tech-tag">{{ tag.strip() }}</span>
                        {% endfor %}
                    </div>
                </div>
                
                <div class="detail-card">
                    <h3>üìö Documentaci√≥n</h3>
                    <div class="documentation-preview">
                        {{ project.documentation|safe|truncate(200) }}
                        <a href="#full-docs" class="read-more">Leer m√°s</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Project sections navigation -->
        <div class="section-nav">
            <h2>Explorar Proyecto</h2>
            <div class="section-buttons">
                {% if project.has_preprocessing %}
                <a href="{{ url_for('project_subpage', project_id=project.id, subpage='preprocesamiento') }}" class="btn outline">
                    <i class="fas fa-cogs"></i> Preprocesamiento
                </a>
                {% endif %}
                
                {% if project.has_analysis %}
                <a href="{{ url_for('project_subpage', project_id=project.id, subpage='analisis') }}" class="btn outline">
                    <i class="fas fa-chart-bar"></i> An√°lisis
                </a>
                {% endif %}
                
                {% if project.has_ml %}
                <a href="{{ url_for('project_subpage', project_id=project.id, subpage='ml') }}" class="btn outline">
                    <i class="fas fa-brain"></i> Modelos
                </a>
                {% endif %}
            </div>
        </div>

        <!-- Documentaci√≥n completa (secci√≥n oculta inicialmente) -->
        <section id="full-docs" class="project-section" style="display: none;">
            <h2 class="section-title">
                <i class="fas fa-book"></i> Documentaci√≥n Completa
            </h2>
            <div class="section-content">
                {{ project.documentation|safe }}
            </div>
        </section>

        <!-- Project footer -->
        <div class="project-footer">
            <a href="{{ url_for('projects_page') }}" class="btn outline">
                <i class="fas fa-arrow-left"></i> Volver a Proyectos
            </a>
            
            <div class="social-share">
                <span>Compartir:</span>
                <a href="https://twitter.com/share?url={{ request.url }}&text=Mira este proyecto: {{ project.title }}" 
                   class="social-icon" target="_blank">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.url }}&title={{ project.title }}&summary={{ project.description }}" 
                   class="social-icon" target="_blank">
                    <i class="fab fa-linkedin"></i>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Script para mostrar documentaci√≥n completa -->
<script>
document.querySelector('.read-more').addEventListener('click', function(e) {
    e.preventDefault();
    document.getElementById('full-docs').style.display = 'block';
    this.style.display = 'none';
    window.location.hash = '#full-docs';
});
</script>
{% endblock %}